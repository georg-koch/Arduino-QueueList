group: "stable"
dist: "trusty"
os: "linux"
language: "c"
before_install:
 - "/sbin/start-stop-daemon --start --quiet --pidfile /tmp/custom_xvfb_1.pid --make-pidfile --background --exec /usr/bin/Xvfb -- :1 -ac -screen 0 1280x1024x16"
 - "sleep 3"
 - "export DISPLAY=:1.0"
 - "wget http://downloads.arduino.cc/arduino-1.8.7-linux64.tar.xz"
 - "tar xf arduino-1.8.7-linux64.tar.xz"
 - "wget http://downloads.arduino.cc/arduino-1.8.1-linux64.tar.xz"
 - "tar xf arduino-1.8.1-linux64.tar.xz"
install:
script:
 - "echo '======= test with arduino-1.8.1' ======="
 - "sudo cp -r arduino-1.8.1 /usr/local/share/arduino"
 - "sudo ln -s /usr/local/share/arduino/arduino /usr/local/bin/arduino"
 - "sudo ln -s $PWD /usr/local/share/arduino/libraries/ArduinoQueueList"
 - "arduino --verify --board arduino:avr:uno $PWD/examples/ArduinoQueueList/ArduinoQueueList.ino"
 - "sudo rm -rf /usr/local/share/arduino"
 - "sudo rm /usr/local/bin/arduino"
 - "echo '======= test with arduino-1.8.7' ======="
 - "sudo cp -r arduino-1.8.7 /usr/local/share/arduino"
 - "sudo ln -s /usr/local/share/arduino/arduino /usr/local/bin/arduino"
 - "sudo ln -s $PWD /usr/local/share/arduino/libraries/ArduinoQueueList"
 - "arduino --verify --board arduino:avr:uno $PWD/examples/ArduinoQueueList/ArduinoQueueList.ino"
 - "sudo rm -rf /usr/local/share/arduino"
 - "sudo rm /usr/local/bin/arduino"
